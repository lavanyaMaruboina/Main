<template>
  <div class="slds-p-around_medium">

    <div class="slds-text-heading_medium slds-border_bottom slds-m-vertical_medium"><strong>Instalment Pattern</strong>
    </div>
    <!-- <lightning-card class="slds-p-around_medium"> -->

      <template lwc:if={isTractorLead}>
        <table if:true={isCmpRendered} class="slds-table slds-table_cell-buffer slds-table_bordered">
            <thead>
                <tr>
                    <th>Installment No</th>
                    <th>Due Date</th>
                    <th>Opening Principle</th>
                    <th>Principal</th>
                    <th>Interest</th>
                    <th>Closing Principle</th>
                    <th>EMI Amount</th>
                </tr>
            </thead>
            <tbody lwc:if={isStructured}>
                <template for:each={totalPaybleEMI} for:item="emi">
                    <tr key={emi.installmentNumber}>
                        <td>{emi.installmentNumber}</td>
                        <td>{emi.emiDueDate}</td>
                        <td>{emi.openingPrincipal}</td>
                        <td>{emi.pricipalComponent}</td>
                        <td>{emi.interestComponent}</td>
                        <td>{emi.closingPrincipal}</td>
                        <td>{emi.installmentAmount}</td>
                    </tr>
                </template>
            </tbody>
            <tbody lwc:else>
                <template for:each={totalPaybleEMI} for:item="emi">
                    <tr key={emi.instalmentNo}>
                        <td>{emi.instalmentNo}</td>
                        <td>{emi.dueDate}</td>
                        <td>{emi.openingPrinciple}</td>
                        <td>{emi.principalComp}</td>
                        <td>{emi.interestComp}</td>
                        <td>{emi.closingPrinciple}</td>
                        <td>{emi.instalmentAmount}</td>
                    </tr>
                </template>
            </tbody>
        </table>
    </template>

    <div class="slds-box slds-m-vertical_medium" lwc:else>
      <template if:true={relatedEMI}>
        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_col-bordered"
          style="border: 1px solid rgb(201, 201, 201);">
          <thead>
            <tr class="slds-line-height_reset">
              <th scope="col">
                <div class="slds-truncate">From No</div>
              </th>
              <th scope="col">
                <div class="slds-truncate">To No</div>
              </th>
              <th scope="col">
                <div class="slds-truncate">Amount</div>
              </th>
            </tr>
          </thead>
          <tbody>
            <template for:each={relatedEMI} for:item="emiObj" for:index="i">
              <tr class="slds-hint-parent" key={emiObj.emi}>
                <td>
                  <div class="slds-truncate">{emiObj.from}</div>
                </td>
                <td>
                  <div class="slds-truncate">{emiObj.to}</div>
                </td>
                <td>
                  <div class="slds-truncate">{emiObj.emi}</div>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
      </template>
      <template if:true={showMessage}>
        {errorMessage}
      </template>
    </div>
    <!-- </lightning-card> -->
    <div class="slds-float_right slds-m-around_medium ">
      <input class="iBLButton" type="submit" value="Close" onclick={handleCloseButton}/>
    </div>
  </div>
</template>